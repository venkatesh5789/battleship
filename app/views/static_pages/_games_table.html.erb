<p>
<table class="table table-striped">
  <% @game_list = Game.all %>
  <% if !@game_list.nil? %>
      <% if user_signed_in? %>                                              ``
          <%@game_list.each  do |game| %>
              <tr>
                <th><%=game.name  %>  </th>

                <% if(game.status == $GAME_STATUS_WAITING) %>
                    <% if GamePlayer.where(:game_id => game.id, :user_id => current_user.id).count == 1 %>
                        <th>  <%= link_to "Continue Game", game, class:"btn" %> </th>
                    <% else %>
                        <th> <%= link_to "Join Game", game, class:"btn"%>
                    <% end %>
                    </th>
                <%else if(game.status == $GAME_STATUS_STARTED) %>
                        <% if GamePlayer.where(:game_id => game.id, :user_id => current_user.id).count == 1 %>
                            <th>  <%= link_to "Continue Game", game, class:"btn" %> </th>
                        <% else %>
                            <th>  <%= link_to "Observe Game", game, class:"btn" %> </th>
                        <% end %>
                    <% end %>
                <% end %>
              </tr>
          <% end %>
      <% else %>
          <%@game_list.each  do |game| %>
              <tr>
                <th><%=game.name  %>  </th>

                <% if(game.status == $GAME_STATUS_WAITING) %>

                    <th>  Ready </th>

                <%else if(game.status == $GAME_STATUS_STARTED) %>
                        <th>  Going on </th>
                    <% end %>
                <% end %>
              </tr>
          <% end %>
      <% end %>
  <% end %>

</table>
</p>